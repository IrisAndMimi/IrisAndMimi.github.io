<!DOCTYPE html>
<html>
<head>
	<title>DinnerDice!</title>
	<link rel="stylesheet" type="text/css" href="./DDstyle.css"/>
	<script src="./DDfunc.js" /></script>
</head>
    
<div class="dice-wrap">
  <ul id="dice">
    <li class="dice-1">1</li>
    <li class="dice-2">2</li>
    <li class="dice-3">3</li>
    <li class="dice-4">4</li>
    <li class="dice-5">5</li>
    <li class="dice-6">6</li>
  </ul>
</div>

   <center> <body><h1>骰一下!</h1></body></center>

<div class="action">
<a href="javascript:void(0);" class="btn" id="btn-start">Start</a>
</div>
<div class="result">
  <p id="dice-count"></p>
</div>
<head><script type="text/javascript">
  ;(function(window, document, Math, undefined){
	  function $(selector){
		  return document.querySelector(selector);
	  }
	  function addClass(ele, className){
		  ele.setAttribute('class', ele.getAttribute('class') ? ele.getAttribute('class').replace(/^.*\w+.*$/, ' ' + className) : className);
	  }
	  function removeClass(ele, className){
		  ele.getAttribute('class') && ele.setAttribute('class', ele.getAttribute('class').replace(new RegExp(' ' + className, 'g'), ''));
	  }
	  var $dice = $('#dice');
	  var $diceResult = $('#dice-count');
	  var dots = ['dice1', 'dice2', 'dice3', 'dice4', 'dice5', 'dice6'];
	  $('#btn-start').addEventListener('click', function(){
		  $diceResult.innerHTML = '';
		  addClass($dice, 'shuffling'); // start
		  var countDown = Math.floor(Math.random() * 6) + 5;
		  var dot = Math.floor(Math.random() * 6) % 6 + 1;
		  var timer = setInterval(function(){
			  if (countDown <= 0) {
				  clearInterval(timer);
				  setTimeout(function(){
					  setDots(dot - 1);
					  removeClass($dice, 'shuffling'); // end
					  $diceResult.innerHTML = dot;
				  }, 1000);
			  }
			  countDown--;
		  }, 1000);
	  });
	  function setDots(dot){
		  addClass($dice, dots[dot]);
	  }
  })(window, document, Math);
</script></head>

</html>
